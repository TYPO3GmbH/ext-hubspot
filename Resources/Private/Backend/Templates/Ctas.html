{namespace hs = T3G\Hubspot\ViewHelpers}
{namespace core = TYPO3\CMS\Core\ViewHelpers}
<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
     xmlns:f="http://xsd.helhum.io/ns/typo3/cms-fluid/master/ViewHelpers">
  <f:layout name="Main"/>
  <f:section name="content">
    <h2>
      <f:translate key="hubspot_integration.ctas.ctasInUse"/>
    </h2>
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th>
          <f:translate key="hubspot_integration.ctas.pid"/>
        </th>
        <th>
          <f:translate key="hubspot_integration.ctas.header"/>
        </th>
        <th colspan="2">
          <f:translate key="hubspot_integration.ctas.name"/>
        </th>
      </tr>
      </thead>
      <f:for each="{ctasInUse}" as="ctaElement">
        <tr>
          <td>
            <a href="{hs:editRecord(parameters:'edit[pages][{ctaElement.pid}]=edit&returnUrl={returnUrl}')}">
              <core:iconForRecord table="pages" row="{uid: ctaElement.pid, hidden: ctaElement.pageHidden, starttime: ctaElement.pageStarttime, endtime: ctaElement.pageEndtime}" /> {ctaElement.title}</a></td>
          <td><a href="{hs:editRecord(parameters:'edit[tt_content][{ctaElement.uid}]=edit&returnUrl={returnUrl}')}">
            <core:iconForRecord table="tt_content" row="{ctaElement}"/>
            <f:if condition="{ctaElement.header}">
              <f:then>{ctaElement.header}</f:then>
              <f:else><em>
                <f:translate key="hubspot_integration.ctas.noTitle"/>
              </em></f:else>
            </f:if>
          </a></td>
          <td>
            {ctaElement.name}
          </td>
          <td align="right">
              <a href="{hs:editRecord(parameters:'edit[tt_content][{ctaElement.uid}]=edit&returnUrl={returnUrl}')}" class="btn btn-default btn-sm">
                <core:icon identifier="actions-open" size="small"/>
                <f:translate key="hubspot_integration.ctas.editCta"/>
              </a>
          </td>
        </tr>
      </f:for>
    </table>
  </f:section>
</div>
