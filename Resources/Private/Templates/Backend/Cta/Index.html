<html
  xmlns:be="http://typo3.org/ns/TYPO3/CMS/Backend/ViewHelpers"
  xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
  xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true"
>

<f:layout name="Main"/>
<f:section name="content">
  <h2>
    <f:translate key="hubspot_integration.ctas.ctasInUse"/>
  </h2>
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>
        <f:translate key="hubspot_integration.ctas.pid"/>
      </th>
      <th>
        <f:translate key="hubspot_integration.ctas.header"/>
      </th>
      <th colspan="2">
        <f:translate key="hubspot_integration.ctas.name"/>
      </th>
    </tr>
    </thead>
    <f:for each="{ctasInUse}" as="ctaElement">
      <tr>
        <td>
          <a href="{be:moduleLink(route: 'record_edit', query: 'edit[pages][{ctaElement.pid}]=edit&returnUrl={returnUrl}')}">
            <core:iconForRecord table="pages" row="{uid: ctaElement.pid, hidden: ctaElement.pageHidden, starttime: ctaElement.pageStarttime, endtime: ctaElement.pageEndtime}"/>
            {ctaElement.title}
          </a>
        </td>
        <td>
          <a href="{be:moduleLink(route: 'record_edit', query: 'edit[tt_content][{ctaElement.uid}]=edit&returnUrl={returnUrl}')}">
            <core:iconForRecord table="tt_content" row="{ctaElement}"/>
            <f:if condition="{ctaElement.header}">
              <f:then>{ctaElement.header}</f:then>
              <f:else><em>
                <f:translate key="hubspot_integration.ctas.noTitle"/>
              </em></f:else>
            </f:if>
          </a>
        </td>
        <td>
          {ctaElement.name}
        </td>
        <td align="right">
          <a href="{be:moduleLink(route: 'record_edit', query: 'edit[tt_content][{ctaElement.uid}]=edit&returnUrl={returnUrl}')}" class="btn btn-default btn-sm">
            <core:icon identifier="actions-open" size="small"/>
            <f:translate key="hubspot_integration.ctas.editCta"/>
          </a>
        </td>
      </tr>
    </f:for>
  </table>
</f:section>

</html>
