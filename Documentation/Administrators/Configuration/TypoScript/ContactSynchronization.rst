.. include:: /Includes.txt

.. _configuration-contactsync:

=======================
Contact Synchronization
=======================

.. _configuration-contactsync-persistence:

General Persistence
===================

TypoScript variables within `module.tx_hubspot.persistence`.

.. _configuration-contactsync-storagepid:

synchronize.storagePid
----------------------

:aspect:`Property`
   synchronize.storagePid

:aspect:`Data type`
   Integer

:aspect:`Description`
   Page ID for storage of Frontend User records created during synchronization.

.. _configuration-contactsync-settings:

Contact Synchronization Settings
================================

TypoScript variables within `module.tx_hubspot.settings.synchronize`.

.. _configuration-contactsync-limitToPids:

limitToPids
-----------

:aspect:`Property`
   limitToPids

:aspect:`Data type`
   Commaseparated list of integers

:aspect:`Default`
   Same as `module.tx_hubspot.persistence.synchronize.storagePid`

:aspect:`Description`
   Page IDs to search for Frontend Users within. Default TypoScript template
   sets this value to the same as. If empty, the search for records will ignore
   Page ID.

.. _configuration-contactsync-limit:

limit
-----

:aspect:`Property`
   limit

:aspect:`Data type`
   Integer

:aspect:`Default`
   10

:aspect:`Description`
   The max number of records to process during a single synchronization run.

.. _configuration-contactsync-createNewInHubspot:

createNewInHubspot
------------------

:aspect:`Property`
   createNewInHubspot

:aspect:`Data type`
   Boolean

:aspect:`Default`
   true

:aspect:`Description`
   If true, frontend users that do not exist in Hubspot will be created. Search
   for existing contact is based on the email address in the `email` field.

.. _configuration-contactsync-createNewInTypo3:

createNewInTypo3
----------------

:aspect:`Property`
   createNewInTypo3

:aspect:`Data type`
   Boolean

:aspect:`Default`
   false

:aspect:`Description`
   Hubspot contacts that do not already exist as Frontend Users in TYPO3 are
   created. Search for existing contact is based on the email address in the
   `email` field. **Please note:** No password is generated by default.

.. _configuration-contactsync-toHubspot:

toHubspot
---------

:aspect:`Property`
   toHubspot

:aspect:`Data type`
   Array of Hubspot property names

:aspect:`Default`
   The following fields are preconfigured: email, firstname, lastname, company,
   phone, address, city, state, and website. See the TypoScript template
   for more information: `Configuration/TypoScript/setup.typoscript`

:aspect:`Description`
   An array of Hubspot property names with :ref:`t3tsref:stdwrap` configuration.

.. _configuration-contactsync-toHubspot-property:

toHubspot.[property name]
-------------------------

:aspect:`Property`
   toHubspot.[property name]

:aspect:`Data type`
   :ref:`t3tsref:stdwrap`

:aspect:`Default`

:aspect:`Description`
   Defines how each Hubspot property is rendered and prepared for
   synchronization. The :ref:`t3tsref:stdwrap` data array is populated with
   data from the Frontend User database row and can be accessed for example
   using :ref:`t3tsref:stdwrap`'s `field` property.

:aspect:`Example`
   Setting the Hubspot `firstname` property to the value of a Frontend User's
   `first_name` property.

   .. code-block:: typoscript

      toHubspot.firstname.field = first_name

.. _configuration-contactsync-ignoreOnHubspotCreate:

ignoreOnHubspotCreate
---------------------

:aspect:`Property`
   ignoreOnHubspotCreate

:aspect:`Data type`
   Comma-separated list of of Hubspot property names

:aspect:`Default`

:aspect:`Description`
   Property names in this list will be ignored (not sent to Hubspot) when a
   Hubspot property is created.

.. _configuration-contactsync-ignoreOnHubspotUpdate:

ignoreOnHubspotUpdate
---------------------

:aspect:`Property`
   ignoreOnHubspotUpdate

:aspect:`Data type`
   Comma-separated list of of Hubspot property names

:aspect:`Default`

:aspect:`Description`
   Property names in this list will be ignored (not sent to Hubspot) when a
   Hubspot property is updated.

.. _configuration-contactsync-toFrontendUser:

toFrontendUser
--------------

:aspect:`Property`
   toFrontendUser

:aspect:`Data type`
   Array of fe_user property names

:aspect:`Default`
   The following fields are preconfigured: username, email, first_name,
   last_name, name, company, telephone, address, city, state, and www. See the
   TypoScript template for more information:
   `Configuration/TypoScript/setup.typoscript`

:aspect:`Description`
   An array of fe_user property names with :ref:`t3tsref:stdwrap` configuration.

.. _configuration-contactsync-toFrontendUser-property:

toFrontendUser.[property name]
------------------------------

:aspect:`Property`
   toFrontendUser.[property name]

:aspect:`Data type`
   :ref:`t3tsref:stdwrap`

:aspect:`Default`

:aspect:`Description`
   Defines how each Frontend User property is rendered and prepared for
   synchronization. The :ref:`t3tsref:stdwrap` data array is populated with
   data from the Hubspot contact and can be accessed for example using
   :ref:`t3tsref:stdwrap`'s `field` property.

:aspect:`Example`
   Setting the Hubspot `firstname` property to the value of a Frontend User's
   `first_name` property.

   .. code-block:: typoscript

      toFrontendUser.name.dataWrap = {field:firstname} {field:lastname}

.. _configuration-contactsync-ignoreOnFrontendUserCreate:

ignoreOnFrontendUserCreate
--------------------------

:aspect:`Property`
   ignoreOnFrontendUserCreate

:aspect:`Data type`
   Comma-separated list of of Frontend User properties

:aspect:`Default`

:aspect:`Description`
   Property names in this list will be ignored (not persisted to database) when
   a Frontend User is created.

.. _configuration-contactsync-ignoreOnFrontendUserUpdate:

ignoreOnFrontendUserUpdate
--------------------------

:aspect:`Property`
   ignoreOnFrontendUserCreate

:aspect:`Data type`
   Comma-separated list of of Frontend User properties

:aspect:`Default`
   username

:aspect:`Description`
   Property names in this list will be ignored (not persisted to database) when
   a Frontend User is updated.

.. _configuration-contactsync-examples:

Examples
========

.. code-block:: typoscript

   module.tx_hubspot {
     persistence {
       synchronize.storagePid = 123
     }

     settings {
       synchronize {
         limitToPids < module.tx_hubspot.persistence.synchronize.storagePid
         limit = 10

         createNewInHubspot = 1
         createNewInTypo3 = 0

         toHubspot {
           email {
             field = email
             trim = 1
           }

           firstname = first_name
           lastname = last_name
           company = company
           phone = telephone
           address = address
           city = city
           state = state
           website = www
           country = country
         }

         ignoreOnHubspotCreate =
         ignoreOnHubspotUpdate =

         toFrontendUser {
           username = email
           email = email
           first_name = firstname
           last_name = lastname
           name.dataWrap = {field:firstname} {field:lastname}
           company = company
           telephone = phone
           address = address
           city = city
           state = state
           www = website
         }

         ignoreOnFrontendUserCreate =
         ignoreOnFrontendUserUpdate = username
       }
     }
   }
